<!DOCTYPE html>
<html>
<head>

	<title>Suite cours - HTTP Request</title>
	<meta charset="utf-8">
	<link rel="icon" type="image/png" href="iconXML.png">

</head>

<body onload=" Init();">
<header>
	<table>
		<tr>
			<td><a href="index.html">Accueil</a></td>
			<td><a href="DOMJS_XML_1.html">Requête HTTP</a></td>
			<td><a href="DOMJS_ListeFilm.html">Liste de films</a></td>
		</tr>
	</table>
<!------------------------------------------------------------------>
	<table>
		<tr>
			<td><img src="iconXML.png" alt="icone d'image XML" style="height: 20px"></td>
			<td><h1>/ HTTP Request</h1></td>
		</tr>
	</table>
</header>
	


</body>

<!-- Créer une liste de sélection des idReal. Quand selectionné, afficher en dessous l'ensemble des films du réalisateur, avec du css -->

<select name="select_idReal" id="id_selection_idReal">
	<option id="option1">Veuillez selectionner une option</option>
</select>




<script type="text/javascript">
	
	function Init()
	{
		var xhttp = new XMLHttpRequest();

   	 	xhttp.onreadystatechange = function() 
   	 	{
	        if (xhttp.readyState == 4 && xhttp.status == 200)//Quand la requête est terminée
	        {
	        	var parser = new DOMParser();
			 	var XMLDoc = parser.parseFromString(this.responseText, "text/html");
				var liste = document.getElementById('id_selection_idReal');

			 	var x = XMLDoc.getElementsByTagName('film');

			 	//Boucle ajoutant les options dans le select
			 	for(i = 0; i < x.length; i++)
			 	{
			 		var option = document.createElement('option');
			 		option.setAttribute("value", x[i].getAttribute('idreal'));
			 		var text = document.createTextNode(x[i].getAttribute('idreal'));
			 		option.appendChild(text);
			 		liste.appendChild(option);
			 	}


        	}
   		}

	    xhttp.open("GET", "MesFilms.xml", true);
	    xhttp.send();


	 	// var xmlStr = "<lesfilms><film idreal=\"7\"><titre>Pandora and the flying Dutchman</titre><realisateur>7</realisateur><date>1951</date></film><film idreal=\"8\"><titre>Johnny Guitar</titre><realisateur>8</realisateur><date>1954</date></film><film idreal=\"9\"><titre>Woman under the Influence (A) </titre><realisateur>9</realisateur><date>1974</date></film><film idreal=\"10\"><titre>Apartment (The) </titre><realisateur>10</realisateur><date>1960</date></film><film idreal=\"11\"><titre>Victor/Victoria </titre><realisateur>11</realisateur><date>1982</date></film><film idreal=\"12\"><titre>Modern Times </titre><realisateur>12</realisateur><date>1936</date></film><film idreal=\"13\"><titre>M&#xE9;pris (Le) </titre><realisateur>13</realisateur><date>1963</date></film><film idreal=\"14\"><titre>Jour de f&#xEA;te </titre><realisateur>14</realisateur><date>1948</date></film><film idreal=\"15\"><titre>Olvidados (Los) </titre><realisateur>15</realisateur><date>1950</date></film><film idreal=\"16\"><titre>West Side Story </titre><realisateur>16</realisateur><date>1961</date></film></lesfilms>"

	}






</script>





<footer>
	<p style="font-style: italic;">Cédric Maggay - Ludus Académie Strasbourg - c.maggay@ludus-academie.com</p>
</footer>
</html>